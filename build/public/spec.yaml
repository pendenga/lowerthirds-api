openapi: 3.0.0
servers:
  - description: Lower Thirds API
    url: https://api.lower3.com/v1
info:
  title: Lower Thirds
  description: App for managing meeting agendas and generating lower thirds for virtual meetings
  version: "1.0.0"
  contact:
    email: pendenga@gmail.com
tags:
  - name: Meetings
    description: Details about individual meetings
  - name: Orgs
    description: Details about orgs
  - name: Items
    description: Details about items
  - name: Users
    description: Manage users
paths:
  /items:
    get:
      tags:
        - Items
      description: A list of items
      operationId: getItems
      parameters:
        - $ref: "#/components/parameters/meetingId"
        - $ref: "#/components/parameters/orgId"
        - $ref: "#/components/parameters/dateFrom"
        - $ref: "#/components/parameters/dateTo"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '201':
          $ref: '#/components/responses/items'
        '400':
          description: 'invalid input, object invalid'
    post:
      tags:
        - Items
      description: Creates an item
      operationId: postItem
      responses:
        '201':
          $ref: '#/components/responses/item'
        '400':
          description: 'invalid input, item invalid'
        '409':
          description: an existing item already exists
      parameters: []
      requestBody:
        description: Meeting to add
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/BlankItem'
                - $ref: '#/components/schemas/LyricsItem'
                - $ref: '#/components/schemas/MessageItem'
                - $ref: '#/components/schemas/SpeakerItem'
                - $ref: '#/components/schemas/TimerItem'
  /items/{ItemID}:
    get:
      tags:
        - Items
      description: Get item
      operationId: getItem
      parameters:
        - $ref: "#/components/parameters/itemId"
      responses:
        '200':
          $ref: '#/components/responses/item'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
    put:
      tags:
        - Items
      description: Update an existing item
      operationId: updateItem
      parameters:
        - $ref: "#/components/parameters/itemId"
      requestBody:
        description: Item object
        content:
          application/json:
            schema:
              oneOf:
                - $ref: '#/components/schemas/BlankItem'
                - $ref: '#/components/schemas/LyricsItem'
                - $ref: '#/components/schemas/MessageItem'
                - $ref: '#/components/schemas/SpeakerItem'
                - $ref: '#/components/schemas/TimerItem'
      responses:
        '200':
          $ref: '#/components/responses/item'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
        '409':
          description: an existing item already exists
    delete:
      tags:
        - Items
      description: Delete an item
      operationId: deleteItem
      parameters:
        - $ref: "#/components/parameters/itemId"
      responses:
        '204':
          description: The request was successful. The response will be empty.
        '401':
          description: You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
  /meetings:
    get:
      tags:
        - Meetings
      description: List of meetings
      operationId: getMeetings
      parameters:
        - $ref: "#/components/parameters/dateFrom"
        - $ref: "#/components/parameters/dateTo"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '201':
          $ref: '#/components/responses/meetings'
        '400':
          description: 'invalid input, object invalid'
    post:
      tags:
        - Meetings
      description: Creates a meeting
      operationId: postMeetings
      responses:
        '201':
          $ref: '#/components/responses/meetings'
        '400':
          description: 'invalid input, meeting invalid'
        '409':
          description: an existing meeting already exists
      parameters: []
      requestBody:
        description: Meeting to add
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Meeting'
  /meetings/{MeetingID}:
    get:
      tags:
        - Meetings
      description: Get meeting
      operationId: getMeeting
      parameters:
        - $ref: "#/components/parameters/meetingId"
      responses:
        '200':
          $ref: '#/components/responses/meeting'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
    put:
      tags:
        - Meetings
      description: Update an existing meeting
      operationId: updateMeeting
      parameters:
        - $ref: "#/components/parameters/meetingId"
      requestBody:
        description: Meeting object
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Meeting'
      responses:
        '200':
          $ref: '#/components/responses/meeting'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
        '409':
          description: an existing item already exists
    delete:
      tags:
        - Meetings
      description: Delete a meeting
      operationId: deleteMeeting
      parameters:
        - $ref: "#/components/parameters/meetingId"
      responses:
        '204':
          description: The request was successful. The response will be empty.
        '401':
          description: You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
  /meetings/{MeetingID}/items:
    get:
      tags:
        - Meetings
      description: List of items for a meeting
      operationId: getMeetingItems
      parameters:
        - $ref: "#/components/parameters/meetingId"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '201':
          $ref: '#/components/responses/items'
        '400':
          description: 'invalid input, object invalid'
  /orgs:
    get:
      tags:
        - Orgs
      description: List of orgs
      operationId: getOrgs
      parameters:
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '201':
          $ref: '#/components/responses/orgs'
        '400':
          description: 'invalid input, object invalid'
    post:
      tags:
        - Orgs
      description: Creates an org
      operationId: postOrgs
      responses:
        '201':
          $ref: '#/components/responses/org'
        '400':
          description: 'invalid input, org invalid'
        '409':
          description: an existing org already exists
      parameters: [ ]
      requestBody:
        description: Org to add
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Org'
  /orgs/{OrgID}:
    get:
      tags:
        - Orgs
      description: Get org
      operationId: getOrg
      parameters:
        - $ref: "#/components/parameters/orgId"
      responses:
        '200':
          $ref: '#/components/responses/org'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
    put:
      tags:
        - Orgs
      description: Update an existing org
      operationId: updateOrg
      parameters:
        - $ref: "#/components/parameters/orgId"
      requestBody:
        description: Org object
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Org'
      responses:
        '200':
          $ref: '#/components/responses/org'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
        '409':
          description: an existing item already exists
    delete:
      tags:
        - Orgs
      description: Delete an org
      operationId: deleteOrg
      parameters:
        - $ref: "#/components/parameters/orgId"
      responses:
        '204':
          description: The request was successful. The response will be empty.
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
  /orgs/{OrgID}/meetings:
    get:
      tags:
        - Orgs
      description: List of meetings for an org
      operationId: meetingsListByOrg
      parameters:
        - $ref: "#/components/parameters/orgId"
        - $ref: "#/components/parameters/dateFrom"
        - $ref: "#/components/parameters/dateTo"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '201':
          $ref: '#/components/responses/meetings'
        '400':
          description: 'invalid input, object invalid'
  /orgs/{OrgID}/users:
    get:
      tags:
        - Orgs
      description: List of users for an org
      operationId: usersListByOrg
      parameters:
        - $ref: "#/components/parameters/orgId"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '201':
          $ref: '#/components/responses/users'
        '400':
          description: 'invalid input, object invalid'
  /users:
    get:
      tags:
        - Users
      description: Get all users
      operationId: getUsers
      parameters:
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '200':
          $ref: '#/components/responses/users'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
    post:
      tags:
        - Users
      description: Add a new user
      operationId: addUser
      parameters: []
      requestBody:
        description: User object
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '201':
          $ref: '#/components/responses/user'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '409':
          description: an existing item already exists
  /users/{UserID}:
    get:
      tags:
        - Users
      description: Get user
      operationId: getUser
      parameters:
        - $ref: "#/components/parameters/userId"
      responses:
        '200':
          $ref: '#/components/responses/user'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
    put:
      tags:
        - Users
      description: Update an existing user
      operationId: updateUser
      parameters:
        - $ref: "#/components/parameters/userId"
      requestBody:
        description: User object
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '200':
          $ref: '#/components/responses/user'
        '401':
          description: |
            You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
        '409':
          description: an existing item already exists
    delete:
      tags:
        - Users
      description: Delete a User
      operationId: deleteUser
      parameters:
        - $ref: "#/components/parameters/userId"
      responses:
        '204':
          description: The request was successful. The response will be empty.
        '401':
          description: You did not supply valid Authorization. The response will be empty.
        '404':
          description: The record doesn’t exist. The response will be empty.
  /users/{UserID}/meetings:
    get:
      tags:
        - Users
      description: List of meetings for a user
      operationId: getUserMeetings
      parameters:
        - $ref: "#/components/parameters/userId"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '201':
          $ref: '#/components/responses/meetings'
        '400':
          description: 'invalid input, object invalid'
  /users/{UserID}/orgs:
    get:
      tags:
        - Users
      description: List of orgs for a user
      operationId: getUserOrgs
      parameters:
        - $ref: "#/components/parameters/userId"
        - $ref: "#/components/parameters/page"
        - $ref: "#/components/parameters/pageSize"
      responses:
        '201':
          $ref: '#/components/responses/orgs'
        '400':
          description: 'invalid input, object invalid'
    put:
      tags:
        - Users
      description: Sets the list of orgs for a user
      operationId: setUserOrgs
      parameters:
        - $ref: "#/components/parameters/userId"
      requestBody:
        description: List of org IDs
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IDList'
      responses:
        '201':
          $ref: '#/components/responses/orgs'
        '400':
          description: 'invalid input, orgs invalid'
        '409':
          description: an existing item already exists
components:
  schemas:
    BlankItem:
      type: object
      description: Blank item definition
      required:
        - id
        - type
        - order
        - meeting_id
        - meeting_role
      properties:
        id:
          $ref: '#/components/schemas/ID'
        type:
          $ref: '#/components/schemas/ItemType'
        order:
          $ref: '#/components/schemas/Order'
        meeting_id:
          $ref: '#/components/schemas/ID'
        meeting_role:
          $ref: '#/components/schemas/MeetingRole'
    Date:
      type: string
      description: A date in ISO 8601 format
      format: date-time
      example: 2025-08-29T09:12:33.001Z
    ExpectedDuration:
      type: integer
      description: Expected duration in minutes
      example: 5
    HymnID:
      type: string
      description: Unique identifier for a hymn
      example: 5954ad1f70174bb0
    ID:
      type: string
      description: ID in UUID format
      format: uuid
      example: 9c7b7971-5d35-4f32-8b5a-ffb93e8f6656
    IDList:
      type: array
      description: A list of IDs in UUID format
      items:
        $ref: '#/components/schemas/ID'
      example: [7e0981a5-1159-4e4e-9057-c17817f442ee, 29755439-5bd6-4e17-ae67-156fb2441e34]
    AgendaItem:
      description: One agenda item of a specific type
      oneOf:
        - $ref: '#/components/schemas/BlankItem'
        - $ref: '#/components/schemas/LyricsItem'
        - $ref: '#/components/schemas/MessageItem'
        - $ref: '#/components/schemas/SpeakerItem'
        - $ref: '#/components/schemas/TimerItem'
      discriminator:
        propertyName: ItemType
        mapping:
          blank: '#/components/schemas/BlankItem'
          lyrics: '#/components/schemas/LyricsItem'
          message: '#/components/schemas/MessageItem'
          speaker: '#/components/schemas/SpeakerItem'
          timer: '#/components/schemas/TimerItem'
    AgendaItems:
      description: A list of agenda items
      type: array
      items:
        $ref: '#/components/schemas/AgendaItem'
    ItemType:
      description: Item Type
      type: string
      enum:
        - blank
        - message
        - speaker
        - lyrics
        - timer
    Language:
      description: Language
      type: string
      enum:
        - eng
        - spa
    LyricsItem:
      type: object
      description: Lyrics item definition
      required:
        - id
        - type
        - order
        - meeting_id
        - meeting_role
        - hymn_id
      properties:
        id:
          $ref: '#/components/schemas/ID'
        type:
          $ref: '#/components/schemas/ItemType'
        order:
          $ref: '#/components/schemas/Order'
        meeting_id:
          $ref: '#/components/schemas/ID'
        meeting_role:
          $ref: '#/components/schemas/MeetingRole'
        hymn_id:
          $ref: '#/components/schemas/HymnID'
        show_optional:
          type: boolean
          default: false
          example: true
        show_translation:
          type: boolean
          default: false
          example: true
    Meeting:
      type: object
      description: Meeting item definition
      required:
        - org
        - meetingDate
      properties:
        id:
          $ref: '#/components/schemas/ID'
        org_id:
          $ref: '#/components/schemas/ID'
        conference:
          type: string
          example: Stake Conference
        meeting:
          type: string
          example: General Session
        date:
          $ref: '#/components/schemas/Date'
        expected_duration:
          $ref: '#/components/schemas/ExpectedDuration'
        agenda_items:
          $ref: '#/components/schemas/AgendaItems'
    MeetingRole:
      type: string
      description: Description of what this item is for in the meeting
      example: Meeting intro
    Message:
      type: string
      description: Description for the titles
      example: The broadcast has concluded
    MessageItem:
      type: object
      description: Blank item definition
      required:
        - id
        - meeting_id
        - type
        - order
        - meeting_role
        - primary_text
      properties:
        id:
          $ref: '#/components/schemas/ID'
        type:
          $ref: '#/components/schemas/ItemType'
        order:
          $ref: '#/components/schemas/Order'
        meeting_id:
          $ref: '#/components/schemas/ID'
        meeting_role:
          $ref: '#/components/schemas/MeetingRole'
        primary_text:
          $ref: '#/components/schemas/Message'
        secondary_text:
          $ref: '#/components/schemas/Message'
    Name:
      type: string
      description: Name of the speaker or other participant
      example: President Gregory Knight
    Order:
      type: integer
      description: Order of the item in the meeting agenda
      example: 0
    Org:
      type: object
      description: Organization definition
      required:
        - name
      properties:
        id:
          $ref: '#/components/schemas/ID'
        name:
          type: string
          example: Mesa Flatiron Stake
        user_ids:
          type: array
          items:
            type: string
          example:
            - 3cd5fe4e-9ecb-4ec2-b7c7-0d19288c08e0
            - 78db4a21-968b-482f-b970-bdf0e8b30114
            - a5659535-43a8-486d-9b68-1da5d3fdee06
    SpeakerItem:
      type: object
      description: Speaker item definition
      required:
        - id
        - meeting_id
        - type
        - order
        - meeting_role
        - name
        - title
      properties:
        id:
          $ref: '#/components/schemas/ID'
        type:
          $ref: '#/components/schemas/ItemType'
        order:
          $ref: '#/components/schemas/Order'
        meeting_id:
          $ref: '#/components/schemas/ID'
        meeting_role:
          $ref: '#/components/schemas/MeetingRole'
        name:
          $ref: '#/components/schemas/Name'
        title:
          $ref: '#/components/schemas/Title'
        expected_duration:
          type: integer
          example: 5
    TimerItem:
      type: object
      description: Blank item definition
      required:
        - id
        - meeting_id
        - type
        - order
        - meeting_role
        - target_date
        - show_meeting_details
      properties:
        id:
          $ref: '#/components/schemas/ID'
        meeting_id:
          $ref: '#/components/schemas/ID'
        type:
          $ref: '#/components/schemas/ItemType'
        order:
          $ref: '#/components/schemas/Order'
        meeting_role:
          $ref: '#/components/schemas/MeetingRole'
        show_meeting_details:
          type: boolean
          example: false
    Title:
      type: string
      description: Title of the participant
      example: Stake President
    User:
      type: object
      description: User definition
      required:
        - id
        - email
        - full_name
        - connections
      properties:
        id:
          $ref: '#/components/schemas/UserID'
        email:
          type: string
          format: email
          example: pendenga@gmail.com
        first_name:
          type: string
          example: Grant
        full_name:
          type: string
          example: Grant Anderson
        last_name:
          type: string
          example: Anderson
    UserID:
      type: string
      description: ID in UUID format of the application user
      example: 194bbf601ed54ef5
  parameters:
    dateFrom:
      in: query
      name: DateFrom
      description: pass an optional start date for filter
      required: false
      schema:
        type: string
        format: date
    dateTo:
      in: query
      name: DateTo
      description: pass an optional end date for filter
      required: false
      schema:
        type: string
        format: date
    hymnId:
      in: path
      name: HymnID
      description: Unique identifier for a hymn
      required: true
      schema:
        $ref: '#/components/schemas/HymnID'
    itemId:
      in: path
      name: ItemID
      description: Unique identifier for an item
      required: true
      schema:
        $ref: '#/components/schemas/ID'
    language:
      in: query
      name: Language
      description: pass an optional language filter
      required: false
      schema:
        $ref: '#/components/schemas/Language'
    meetingId:
      in: path
      name: MeetingID
      description: Unique identifier for a meeting
      required: true
      schema:
        $ref: '#/components/schemas/ID'
    orgId:
      in: path
      name: OrgID
      description: pass an optional org filter
      required: true
      schema:
        $ref: '#/components/schemas/ID'
    page:
      in: query
      name: Page
      description: The zero-indexed page number of results (see _limit_)
      schema:
        type: integer
        format: int32
        example: 0
        minimum: 0
        default: 0
    pageSize:
      in: query
      name: PageSize
      description: The maximum number of records to be returned
      schema:
        type: integer
        format: int32
        example: 10
        minimum: 0
        maximum: 1000
        default: 50
    userId:
      in: path
      name: UserID
      description: Unique identifier for a User
      required: true
      schema:
        $ref: '#/components/schemas/UserID'
  responses:
    blankItem:
      description: A single blank item
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BlankItem'
    item:
      description: A single generic item
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AgendaItem'
    items:
      description: A list of items
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AgendaItems'
    lyricsItem:
      description: A single lyrics item
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/LyricsItem'
    messageItem:
      description: A single message item
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/MessageItem'
    meeting:
      description: A single meeting
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Meeting'
    meetings:
      description: A list of meetings
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Meeting'
    org:
      description: A single org
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Org'
    orgs:
      description: A list of orgs
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Org'
    speakerItem:
      description: A single speaker item
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SpeakerItem'
    timerItem:
      description: A single timer item
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TimerItem'
    user:
      description: A single user
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/User'
    users:
      description: A list of users
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/User'
